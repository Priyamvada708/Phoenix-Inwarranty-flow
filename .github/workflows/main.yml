name : Postman collection Workflow

on:
 push:
  branches: [main]

 workflow_dispatch:
 schedule:
  -  cron: '30 14 * * *' # 8:00 AM IST
  -  cron: '00 13 * * *' # 730 PM IST
  -  cron: '00 06 * * 1-5' # 1130 PM IST
  
jobs:

  run-tests
    runs on: ubuntu-latest

    steps:
     -name: checkout the code
      uses: actions/checkout@v5.0.0

    - name: install Node.js and npm
       uses: actions/setup-node@v6.0.0
       with:
        node-version: '22'

     -name: install newman and htmlextra
       run: |
            npm install -g newman  
            npm install -g newman-reporter-htmlextra


      -name: run the postman collection with newman
        run: newman run 'In Warranty Flow Collection Copy.postman_collection.json' \
        -e Dev.postman_environment.json \
        -d testdata.csv \
        -r cli,htmlextra

     
     
